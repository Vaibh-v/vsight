import Nav from "../components/Nav";import { useState } from "react";
export default function AIPage(){const[q,setQ]=useState("");const[a,setA]=useState<string>("");const[loading,setLoading]=useState(false);
const ask=async()=>{setLoading(true);setA("");try{const r=await fetch("/api/ai/ask",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:q})});const j=await r.json();if(!r.ok) throw new Error(j.error||"Failed");setA(j.answer||"");}catch(e:any){setA(e.message);}finally{setLoading(false);} };
return(<main><Nav/><div className="max-w-5xl mx-auto p-6 space-y-4"><h1 className="text-xl font-bold">AI Insight</h1><p className="text-sm text-gray-600">Ask in plain language. We’ll expand this to plan and fetch data from your connected tools.</p><div className="p-4 border rounded-lg space-y-3"><textarea className="w-full border rounded p-2 h-28" placeholder="Why did traffic drop this week?" value={q} onChange={e=>setQ(e.target.value)}/><button className="px-4 py-2 rounded bg-black text-white disabled:opacity-50" onClick={ask} disabled={!q||loading}>{loading?"Thinking…":"Ask"}</button>{a&&<pre className="text-sm bg-gray-50 p-3 rounded whitespace-pre-wrap">{a}</pre>}</div></div></main>);}